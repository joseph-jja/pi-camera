<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <title>Player</title>
  </head>
  <body>
    <canvas id="player" style="background: #000;" width="640px" height="480px">
      Your browser sucks.
    </canvas>
    <canvas id="new-player" style="background: #000;" width="640px" height="480px">
      Your browser sucks.
    </canvas>
    <img id="stream-image">
  </body>
  <script src="/js/socket.io.js"></script>
  <script src="/js/sockImage.js"></script>
  <!--script src="/js/mjpeg" type="module"></script-->
  <script  type="module">
    import * as MJPEG from '/js/mjpeg/index.js';
    let player;
    fetch('/config').then(async resp => {
        const headers = await resp.headers;
        const uuid = headers.get('x-uuid');
        //Leave your .mjpeg video URL here.
        player = new MJPEG.MJPEGPlayer('player', `/preview?x-uuid=${uuid}`, {
            errorHandler: (err) => {
                player.stream = new MJPEG.MJPEGStream(player.options);
                player.start();
            },
            refreshRate: 250
        });
        player.start();
    });
  </script>
</html>
